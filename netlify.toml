[build]
  base = "."
  publish = "dist"
  command = "npm run build:netlify"

[build.environment]
  NODE_VERSION = "18"

# Edge Functions for dynamic SEO
[functions]
  directory = "netlify/edge-functions"

[[edge_functions]]
  path = "/"
  function = "seo"

[[edge_functions]]
  path = "/getting-started"
  function = "seo"

[[edge_functions]]
  path = "/core-concepts"
  function = "seo"

[[edge_functions]]
  path = "/api-reference"
  function = "seo"

[[edge_functions]]
  path = "/http"
  function = "seo"

[[edge_functions]]
  path = "/websocket"
  function = "seo"

[[edge_functions]]
  path = "/graphql"
  function = "seo"

[[edge_functions]]
  path = "/context"
  function = "seo"

[[edge_functions]]
  path = "/devtools"
  function = "seo"

[[edge_functions]]
  path = "/accessibility"
  function = "seo"

[[edge_functions]]
  path = "/debugging"
  function = "seo"

[[edge_functions]]
  path = "/security"
  function = "seo"

[[edge_functions]]
  path = "/performance"
  function = "seo"

[[edge_functions]]
  path = "/error-handling"
  function = "seo"

[[edge_functions]]
  path = "/mobile"
  function = "seo"

[[edge_functions]]
  path = "/examples"
  function = "seo"

[[edge_functions]]
  path = "/playground"
  function = "seo"

[[edge_functions]]
  path = "/benchmarks"
  function = "seo"

[[edge_functions]]
  path = "/migration-react"
  function = "seo"

[[edge_functions]]
  path = "/migration-angular"
  function = "seo"

[[edge_functions]]
  path = "/migration-vue"
  function = "seo"

[[edge_functions]]
  path = "/changelog"
  function = "seo"

[[edge_functions]]
  path = "/ssr"
  function = "seo"

# Localized routes (fr)
[[edge_functions]]
  path = "/fr"
  function = "seo"

[[edge_functions]]
  path = "/fr/*"
  function = "seo"

# Localized routes (es)
[[edge_functions]]
  path = "/es"
  function = "seo"

[[edge_functions]]
  path = "/es/*"
  function = "seo"

# Localized routes (de)
[[edge_functions]]
  path = "/de"
  function = "seo"

[[edge_functions]]
  path = "/de/*"
  function = "seo"

# Localized routes (ja)
[[edge_functions]]
  path = "/ja"
  function = "seo"

[[edge_functions]]
  path = "/ja/*"
  function = "seo"

# Localized routes (pt)
[[edge_functions]]
  path = "/pt"
  function = "seo"

[[edge_functions]]
  path = "/pt/*"
  function = "seo"

# Localized routes (is)
[[edge_functions]]
  path = "/is"
  function = "seo"

[[edge_functions]]
  path = "/is/*"
  function = "seo"

# Localized routes (eo)
[[edge_functions]]
  path = "/eo"
  function = "seo"

[[edge_functions]]
  path = "/eo/*"
  function = "seo"

# Headers for JS files
[[headers]]
  for = "*.js"
  [headers.values]
    Content-Type = "application/javascript"

[[headers]]
  for = "/assets/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# Examples SPA fallbacks
[[redirects]]
  from = "/examples/hmr/*"
  to = "/examples/hmr/index.html"
  status = 200

[[redirects]]
  from = "/examples/blog/*"
  to = "/examples/blog/index.html"
  status = 200

[[redirects]]
  from = "/examples/todo/*"
  to = "/examples/todo/index.html"
  status = 200

[[redirects]]
  from = "/examples/chat/*"
  to = "/examples/chat/index.html"
  status = 200

[[redirects]]
  from = "/examples/ecommerce/*"
  to = "/examples/ecommerce/index.html"
  status = 200

[[redirects]]
  from = "/examples/meteo/*"
  to = "/examples/meteo/index.html"
  status = 200

[[redirects]]
  from = "/examples/router/*"
  to = "/examples/router/index.html"
  status = 200

[[redirects]]
  from = "/examples/store/*"
  to = "/examples/store/index.html"
  status = 200

[[redirects]]
  from = "/examples/dashboard/*"
  to = "/examples/dashboard/index.html"
  status = 200

[[redirects]]
  from = "/examples/sports/*"
  to = "/examples/sports/index.html"
  status = 200

[[redirects]]
  from = "/examples/less-example/*"
  to = "/examples/less-example/index.html"
  status = 200

[[redirects]]
  from = "/examples/stylus-example/*"
  to = "/examples/stylus-example/index.html"
  status = 200

[[redirects]]
  from = "/examples/webpack-example/*"
  to = "/examples/webpack-example/index.html"
  status = 200

[[redirects]]
  from = "/examples/rollup-example/*"
  to = "/examples/rollup-example/index.html"
  status = 200

[[redirects]]
  from = "/examples/esbuild-example/*"
  to = "/examples/esbuild-example/index.html"
  status = 200

# Main SPA fallback (must be last - only applies if file doesn't exist)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
